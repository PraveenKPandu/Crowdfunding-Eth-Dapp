(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{376:function(e,t,n){e.exports=n(791)},381:function(e,t,n){},382:function(e,t,n){},396:function(e,t){},420:function(e,t){},422:function(e,t){},497:function(e,t){},499:function(e,t){},531:function(e,t){},536:function(e,t){},538:function(e,t){},545:function(e,t){},558:function(e,t){},581:function(e,t){},791:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(97),r=n.n(o),l=(n(381),n(11)),s=n(14),c=n(24),u=n(15),p=n(25),m=n(809),d=n(810),y=n(811),b=n(804),f=n(807),h=(n(382),n(38)),g=n.n(h),v=n(149),E=n(48),w=n(806),C=n(793),T=n(803),O=n(340),j=new(n.n(O).a)(window.web3.currentProvider),k=[{inputs:[{internalType:"string",name:"contractName",type:"string"},{internalType:"uint256",name:"targetAmountEth",type:"uint256"},{internalType:"uint256",name:"durationInMin",type:"uint256"},{internalType:"address payable",name:"beneficiaryAddress",type:"address"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"addr",type:"address"},{indexed:!1,internalType:"uint256",name:"totalCollected",type:"uint256"},{indexed:!1,internalType:"bool",name:"succeeded",type:"bool"}],name:"CampaignFinished",type:"event"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"amounts",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"beneficiary",outputs:[{internalType:"address payable",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"collected",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"deadline",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"state",outputs:[{internalType:"enum CrowdFunding.State",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"targetAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalCollected",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"contribute",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"collect",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"finishCrowdFunding",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"beforeDeadline",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getTotalCollected",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"inProgress",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isSuccessful",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"}];function A(e){return new j.eth.Contract(k,e)}var S=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).ONGOING_STATE="0",n.FAILED_STATE="1",n.SUCCEEDED_STATE="2",n.PAID_OUT_STATE="3",n.state={campaign:{name:"N/A",targetAmount:0,totalCollected:0,campaignFinished:!1,deadline:new Date(0),isBeneficiary:!1,state:""},contributionAmount:"0"},n.onContribute=n.onContribute.bind(Object(E.a)(Object(E.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(v.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCampaign(this.getCampaignAddress());case 2:t=e.sent,this.setState({campaign:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCampaignAddress",value:function(){return this.props.match.params.address}},{key:"getCampaign",value:function(){var e=Object(v.a)(g.a.mark(function e(t){var n,a,i,o,r,l,s,c,u,p;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=A(t),e.next=3,n.methods.name().call();case 3:return a=e.sent,e.next=6,n.methods.targetAmount().call();case 6:return i=e.sent,e.next=9,n.methods.totalCollected().call();case 9:return o=e.sent,e.next=12,n.methods.beforeDeadline().call();case 12:return r=e.sent,e.next=15,n.methods.beneficiary().call();case 15:return l=e.sent,e.next=18,n.methods.fundingDeadline().call();case 18:return s=e.sent,e.next=21,n.methods.state().call();case 21:return c=e.sent,(u=new Date(0)).setUTCSeconds(s),e.next=26,j.eth.getAccounts();case 26:return p=e.sent,e.abrupt("return",{name:a,targetAmount:i,totalCollected:o,campaignFinished:!r,deadline:u,isBeneficiary:l.toLowerCase()===p[0].toLowerCase(),state:c});case 28:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(w.a,{celled:!0,padded:!0,color:"teal",striped:!0},i.a.createElement(w.a.Header,null,i.a.createElement(w.a.Row,null,i.a.createElement(w.a.HeaderCell,null,"Name"),i.a.createElement(w.a.HeaderCell,null,"Value"))),i.a.createElement(w.a.Body,null,i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Name"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.name)),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Target amount"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.targetAmount)),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Total collected"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.totalCollected)),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Has finished"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.campaignFinished.toString())),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Deadline"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.deadline.toString())),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"I am beneficiary"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.isBeneficiary.toString())),i.a.createElement(w.a.Row,null,i.a.createElement(w.a.Cell,{singleLine:!0},"Contract state"),i.a.createElement(w.a.Cell,{singleLine:!0},this.state.campaign.state))),i.a.createElement(w.a.Footer,{fullWidth:!0},i.a.createElement(w.a.Row,null,i.a.createElement(w.a.HeaderCell,{colSpan:"2"},this.campaignInteractionSection())))))}},{key:"campaignInteractionSection",value:function(){return this.state.campaign.campaignFinished?this.postCampaignInterface():this.contributeInterface()}},{key:"postCampaignInterface",value:function(){return this.state.campaign.state===this.ONGOING_STATE?i.a.createElement("div",null,i.a.createElement(C.a,{type:"submit",positive:!0},"Finish campaign")):this.state.campaign.state===this.SUCCEEDED_STATE&&!0===this.state.campaign.isBeneficiary?i.a.createElement("div",null,i.a.createElement(C.a,{type:"submit",negative:!0},"Collect funds")):this.state.campaign.state===this.FAILED_STATE?i.a.createElement("div",null,i.a.createElement(C.a,{type:"submit",negative:!0},"Refund")):void 0}},{key:"contributeInterface",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(T.a,{action:{color:"teal",content:"Contribute",onClick:this.onContribute},actionPosition:"left",label:"ETH",labelPosition:"right",placeholder:"1",onChange:function(t){return e.setState({contributionAmount:t.target.value})}}))}},{key:"onContribute",value:function(){var e=Object(v.a)(g.a.mark(function e(t){var n,a,i,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.eth.getAccounts();case 2:return n=e.sent,a=j.utils.toWei(this.state.contributionAmount,"ether"),i=A(this.getCampaignAddress()),e.next=7,i.methods.contribute().send({from:n[0],value:a});case 7:(o=this.state.campaign).totalCollected=Number.parseInt(o.totalCollected)+Number.parseInt(a),this.setState({campaign:o});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),t}(a.Component),x=n(808),L=n(805),M=n(362),I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={address:""},n.onChange=n.onChange.bind(Object(E.a)(Object(E.a)(n))),n.onSubmit=n.onSubmit.bind(Object(E.a)(Object(E.a)(n))),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(x.a,{as:"h1"},"Crowdfunding application"),i.a.createElement(L.a,null,i.a.createElement(L.a.Input,{label:"Contract Address",type:"text",value:this.state.address,onChange:this.onChange}),i.a.createElement(C.a,{type:"submit",onClick:this.onSubmit},"Submit")))}},{key:"onChange",value:function(e){this.setState({address:e.target.value})}},{key:"onSubmit",value:function(e){e.preventDefault(),this.props.history.push("/campaigns/".concat(this.state.address))}}]),t}(a.Component),D=(Object(M.a)(I),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("h1",null,"Ooops! Page not found.")}}]),t}(a.Component)),N=n(50),F=Object(N.a)(),R=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement(m.a,{history:F},i.a.createElement(b.a,null,i.a.createElement(f.a,{secondary:!0},i.a.createElement(f.a.Item,{name:"home",onClick:this.navigateToHome})),i.a.createElement(d.a,null,i.a.createElement(y.a,{exact:!0,path:"/",component:I}),i.a.createElement(y.a,{path:"/campaigns/:address",component:S}),i.a.createElement(y.a,{component:D}))))}},{key:"navigateToHome",value:function(e){e.preventDefault(),F.push("/")}}]),t}(a.Component),H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(R,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");H?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):_(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):_(e)})}}()}},[[376,1,2]]]);
//# sourceMappingURL=main.3090e488.chunk.js.map